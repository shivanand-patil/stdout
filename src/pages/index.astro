---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const posts = await getCollection('posts');
const sortedPosts = posts.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
const recentPosts = sortedPosts.slice(0, 5);
---

<Layout title="stdout.shivoncall.com">
  <div class="welcome">
    <h1>stdout.shivoncall.com</h1>
    <p class="subtitle">&gt; thoughts, logs, scripts</p>
    
    <div class="intro">
      <p>Welcome to my digital garden where I share technical thoughts, code snippets, and development logs.</p>
      <p>In Unix-like systems, <code>stdout</code> is where programs send their normal output. This blog is my stdout - where I redirect my thoughts and experiences for the world to see.</p>
    </div>
  </div>

  <section class="recent-posts">
    <h2>Recent Posts</h2>
    {recentPosts.length > 0 ? (
      <ul class="post-list">
        {recentPosts.map((post) => (
          <li class="post-item">
            <a href={`/posts/${post.slug}`}>
              <h3 class="post-title">{post.data.title}</h3>
              <p class="post-date">{post.data.date.toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
              })}</p>
              {post.data.description && (
                <p class="post-description">{post.data.description}</p>
              )}
            </a>
          </li>
        ))}
      </ul>
    ) : (
      <p>No posts yet. Check back soon!</p>
    )}
    
    {posts.length > 5 && (
      <p class="view-all">
        <a href="/posts">View all posts â†’</a>
      </p>
    )}
  </section>
</Layout>

<style>
  .welcome {
    margin-bottom: 3rem;
  }

  .welcome h1 {
    font-size: 2.5rem;
    margin-bottom: 0.5rem;
    text-shadow: 0 0 15px #00ff00;
  }

  .subtitle {
    font-size: 1.3rem;
    color: #00cc00;
    margin-bottom: 2rem;
  }

  .intro {
    margin-bottom: 2rem;
  }

  .intro p {
    margin-bottom: 1rem;
    color: #cccccc;
  }

  .recent-posts h2 {
    margin-bottom: 1.5rem;
    border-bottom: 1px solid #333;
    padding-bottom: 0.5rem;
  }

  .view-all {
    margin-top: 2rem;
    text-align: center;
  }

  .view-all a {
    color: #00ff00;
    font-weight: bold;
  }
</style>
